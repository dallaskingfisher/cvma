(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[483],{3083:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/members",function(){return n(8575)}])},8575:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return w},default:function(){return S}});var r=n(5893),a=n(4051),o=n.n(a),s=n(4749),i=n(7294),u=n(8699),l=n.n(u);function c(e,t,n,r,a,o,s){try{var i=e[o](s),u=i.value}catch(l){return void n(l)}i.done?t(u):Promise.resolve(u).then(r,a)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){c(o,r,a,s,i,"next",e)}function i(e){c(o,r,a,s,i,"throw",e)}s(void 0)}))}}var m=function(){var e=function(){document.getElementById("uploadForm").reset()},t=(0,s.dy)(),n=t.FileInput,a=t.openFileDialog,u=t.uploadToS3,c=(0,i.useState)(),m=c[0],h=c[1],p=(0,i.useState)(!1),f=p[0],x=p[1],j=(0,i.useState)(),b=j[0],v=j[1],N=(0,i.useState)(!1),_=N[0],y=N[1];(0,i.useEffect)((function(){x(!1);var e=setTimeout((function(){return h(null)}),2e3);return function(){return clearTimeout(e)}}),[f]),(0,i.useEffect)((function(){y(!1);var e=setTimeout((function(){return v(null)}),1e4);return function(){return clearTimeout(e)}}),[_]);var g=function(){var e=d(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(t);case 2:n=e.sent.url,h(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=(0,i.useRef)(),F=(0,i.useRef)(),R=(0,i.useRef)(),P=(0,i.useRef)();function w(){return(w=d(o().mark((function t(n){var r,a,s,i,u,l,c,d;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),r=U.current.value,a=F.current.value,s=R.current.value,i=P.current.value,null!==(u=m)){t.next=12;break}return v("File not loaded"),y(!0),t.abrupt("return");case 12:return l={category:r,month:a,year:s,title:i,location:u},t.next=15,fetch("/api/document/upload",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json"}});case 15:return c=t.sent,t.next=18,c.json();case 18:d=t.sent,e(),console.log(l),v(d.message),y(!0),x(!0);case 24:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,r.jsxs)("section",{className:l().background,children:[(0,r.jsx)("h1",{children:"Upload"}),(0,r.jsx)("h5",{children:b}),(0,r.jsx)(n,{onChange:g}),(0,r.jsx)("button",{onClick:a,className:l().button,children:"Upload"}),(0,r.jsxs)("form",{onSubmit:function(e){return w.apply(this,arguments)},id:"uploadForm",children:[(0,r.jsx)("div",{className:l().control,children:(0,r.jsxs)("select",{id:"fileTypes",ref:U,children:[(0,r.jsx)("option",{value:"meetingMinutes",children:"Meeting Minutes"}),(0,r.jsx)("option",{value:"cebMinutes",children:"CEB Minutes"}),(0,r.jsx)("option",{value:"roadCaptain",children:"Road Captains"})]})}),(0,r.jsx)("div",{className:l().control,children:(0,r.jsxs)("select",{id:"month",ref:F,children:[(0,r.jsx)("option",{value:"jan",children:"January"}),(0,r.jsx)("option",{value:"feb",children:"Febuary"}),(0,r.jsx)("option",{value:"mar",children:"March"}),(0,r.jsx)("option",{value:"apr",children:"April"}),(0,r.jsx)("option",{value:"may",children:"May"}),(0,r.jsx)("option",{value:"jun",children:"June"}),(0,r.jsx)("option",{value:"jul",children:"July"}),(0,r.jsx)("option",{value:"aug",children:"August"}),(0,r.jsx)("option",{value:"sep",children:"September"}),(0,r.jsx)("option",{value:"oct",children:"October"}),(0,r.jsx)("option",{value:"nov",children:"November"}),(0,r.jsx)("option",{value:"dec",children:"December"})]})}),(0,r.jsxs)("div",{className:l().control,children:[" ",(0,r.jsx)("input",{type:"text",placeholder:"Year",id:"year",ref:R,required:!0})]}),(0,r.jsx)("div",{className:l().control,children:(0,r.jsx)("input",{type:"text",placeholder:"File Name",id:"fileName",ref:P,required:!0})}),(0,r.jsx)("div",{}),(0,r.jsx)("button",{id:"submit",className:l().button,children:"Submit"})]}),(0,r.jsx)("p",{children:m})]})},h=n(713),p=n.n(h);function f(e,t,n,r,a,o,s){try{var i=e[o](s),u=i.value}catch(l){return void n(l)}i.done?t(u):Promise.resolve(u).then(r,a)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){f(o,r,a,s,i,"next",e)}function i(e){f(o,r,a,s,i,"throw",e)}s(void 0)}))}}var j=function(e){var t=(0,i.useState)(),n=t[0],a=t[1],s=(0,i.useState)(!1),u=s[0],l=s[1];(0,i.useEffect)((function(){l(!1);var e=setTimeout((function(){return a(null)}),1e4);return function(){return clearTimeout(e)}}),[u]);var c=e.user.firstName,d=e.user.lastName,m=e.user.cellPhone,h=e.user.homePhone,f=e.user.address,j=e.user.city,b=e.user.state,v=e.user.zip,N=e.user.roadName,_=e.user.iceName,y=e.user.iceNumber,g=e.user.email,U=e.user.memberId,F=(0,i.useRef)(),R=(0,i.useRef)(),P=(0,i.useRef)(),w=(0,i.useRef)(),S=(0,i.useRef)(),M=(0,i.useRef)(),k=(0,i.useRef)(),C=(0,i.useRef)(),E=(0,i.useRef)(),T=(0,i.useRef)(),I=function(){document.getElementById("memberUpdateForm").reset()};function A(){return(A=x(o().mark((function e(t){var n,s,i,u,c,d,x,A,D,J,O,z,H;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=F.current.value,s=R.current.value,i=P.current.value,u=w.current.value,c=S.current.value,d=M.current.value,x=k.current.value,A=C.current.value,D=E.current.value,J=T.current.value,n||(n=N),s||(s=m),i||(i=h),u||(u=f),c||(c=j),d||(d=b),x||(x=v),J||(J=g),A||(A=_),D||(D=y),e.next=23,fetch("/api/members/memberUpdate",{method:"POST",body:JSON.stringify({memberId:U,roadNameUpdate:n,cellPhoneUpdate:s,homePhoneUpdate:i,iceNameUpdate:A,iceNumberUpdate:D,addressUpdate:u,cityUpdate:c,stateUpdate:d,zipUpdate:x,emailUpdate:J}),headers:{"Content-Type":"application/json"}});case 23:return O=e.sent,e.next=26,O.json();case 26:z=e.sent,I(),H=(0,r.jsx)("p",{className:p().error,children:z.message}),a(H),l(!0);case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,r.jsxs)("section",{className:p().background,children:[(0,r.jsx)("h1",{children:"Member Information"}),(0,r.jsxs)("div",{children:[n||"",(0,r.jsxs)("div",{children:[U," ",c," ",d]}),(0,r.jsxs)("form",{onSubmit:function(e){return A.apply(this,arguments)},id:"memberUpdateForm",children:[(0,r.jsxs)("div",{className:p().control,children:[(0,r.jsx)("label",{htmlFor:"roadName",children:"Road Name:"}),(0,r.jsx)("input",{type:"text",name:"roadName",id:"roadName",placeholder:N,ref:F}),(0,r.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,r.jsx)("input",{type:"text",name:"email",id:"email",placeholder:g,ref:T})]}),(0,r.jsxs)("div",{className:p().control,children:[(0,r.jsx)("label",{htmlFor:"address",children:"Address:"}),(0,r.jsx)("input",{type:"text",name:"address",id:"address",placeholder:f,ref:w}),(0,r.jsx)("label",{htmlFor:"city",children:"City:"}),(0,r.jsx)("input",{type:"text",name:"city",id:"city",placeholder:j,ref:S}),(0,r.jsx)("label",{htmlFor:"state",children:"State:"}),(0,r.jsx)("input",{type:"text",name:"state",id:"state",placeholder:b,ref:M}),(0,r.jsx)("label",{htmlFor:"zip",children:"Zip: "}),(0,r.jsx)("input",{type:"text",name:"zip",id:"name",placeholder:v,ref:k}),(0,r.jsx)("label",{htmlFor:"homePhone",children:"Home Phone Number:"}),(0,r.jsx)("input",{type:"text",name:"homePhone",id:"homePhone",placeholder:h,ref:P}),(0,r.jsx)("label",{htmlFor:"cellPhone",children:"Cell Phone Number"}),(0,r.jsx)("input",{type:"text",name:"cellPhone",id:"cellPhone",placeholder:m,ref:R})]}),(0,r.jsxs)("div",{className:p().control,children:[(0,r.jsx)("label",{htmlFor:"iceName",children:"ICE Name:"}),(0,r.jsx)("input",{type:"text",name:"iceName",id:"iceName",placeholder:_,ref:C}),(0,r.jsx)("label",{htmlFor:"iceNumber",children:"ICE Phone Number:"}),(0,r.jsx)("input",{type:"text",name:"iceNumber",id:"iceNumber",placeholder:y,ref:E})]}),(0,r.jsx)("button",{type:"submit",className:p().button,children:"Update!"})]})]})]})},b=n(5465),v=n.n(b);function N(e,t,n,r,a,o,s){try{var i=e[o](s),u=i.value}catch(l){return void n(l)}i.done?t(u):Promise.resolve(u).then(r,a)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){N(o,r,a,s,i,"next",e)}function i(e){N(o,r,a,s,i,"throw",e)}s(void 0)}))}}var y=function(){var e=(0,i.useState)(),t=e[0],n=e[1],a=(0,i.useState)(!1),s=a[0],u=a[1];(0,i.useEffect)((function(){var e=setTimeout((function(){return n(null)}),7e3);return function(){return clearTimeout(e)}}),[s]);var l=(0,i.useRef)(),c=(0,i.useRef)(),d=(0,i.useRef)(),m=(0,i.useRef)(),h=(0,i.useRef)(),p=(0,i.useRef)(),f=(0,i.useRef)(),x=(0,i.useRef)(),j=(0,i.useRef)(),b=(0,i.useRef)(),N=(0,i.useRef)(),y=(0,i.useRef)(),g=(0,i.useRef)(),U=(0,i.useRef)(),F=function(){document.getElementById("newMemberForm").reset()};function R(){return(R=_(o().mark((function e(t){var a,s,i,_,R,P,w,S,M,k,C,E,T,I,A,D;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=l.current.value,s=c.current.value,i=d.current.value,_=m.current.value,R=h.current.value,P=p.current.value,w=f.current.value,S=x.current.value,M=j.current.value,k=b.current.value,C=N.current.value,E=g.current.value,T=y.current.value,I=U.current.value,e.next=17,fetch("/api/members/memberNew",{method:"POST",body:JSON.stringify({memberId:a,roadNameUpdate:s,cellPhoneUpdate:i,homePhoneUpdate:_,iceNameUpdate:M,iceNumberUpdate:k,addressUpdate:R,cityUpdate:P,stateUpdate:w,zipUpdate:S,emailUpdate:C,lastNameUpdate:E,firstNameUpdate:T,role:I}),headers:{"Content-Type":"application/json"}});case 17:return A=e.sent,e.next=20,A.json();case 20:e.sent.message&&(D=(0,r.jsx)("p",{className:v().error,children:"Member Added"}),u(!0),n(D)),F();case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,r.jsxs)("section",{className:v().background,children:[(0,r.jsx)("h1",{children:"Member Information"}),(0,r.jsxs)("div",{children:[t,(0,r.jsx)("div",{children:(0,r.jsx)("p",{children:"New Member"})}),(0,r.jsxs)("form",{onSubmit:function(e){return R.apply(this,arguments)},id:"newMemberForm",children:[(0,r.jsxs)("div",{className:v().control,children:[(0,r.jsx)("label",{htmlFor:"memberNumber",children:"Member Number"}),(0,r.jsx)("input",{type:"text",name:"memberNumber",id:"memberNumber",ref:l}),(0,r.jsx)("label",{htmlFor:"firstName",children:"First Name:"}),(0,r.jsx)("input",{type:"text",name:"firstName",id:"firstName",ref:y}),(0,r.jsx)("label",{htmlFor:"lastName",children:"Last Name:"}),(0,r.jsx)("input",{type:"text",name:"lastName",id:"lastName",ref:g}),(0,r.jsx)("label",{htmlFor:"roadName",children:"Road Name:"}),(0,r.jsx)("input",{type:"text",name:"roadName",id:"roadName",ref:c}),(0,r.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,r.jsx)("input",{type:"text",name:"email",id:"email",ref:N})]}),(0,r.jsxs)("div",{className:v().control,children:[(0,r.jsx)("label",{htmlFor:"address",children:"Address:"}),(0,r.jsx)("input",{type:"text",name:"address",id:"address",ref:h}),(0,r.jsx)("label",{htmlFor:"city",children:"City:"}),(0,r.jsx)("input",{type:"text",name:"city",id:"city",ref:p}),(0,r.jsx)("label",{htmlFor:"state",children:"State:"}),(0,r.jsx)("input",{type:"text",name:"state",id:"state",ref:f}),(0,r.jsx)("label",{htmlFor:"zip",children:"Zip: "}),(0,r.jsx)("input",{type:"text",name:"zip",id:"zip",ref:x}),(0,r.jsx)("label",{htmlFor:"homePhone",children:"Home Phone Number:"}),(0,r.jsx)("input",{type:"text",name:"homePhone",id:"homePhone",ref:m}),(0,r.jsx)("label",{htmlFor:"cellPhone",children:"Cell Phone Number"}),(0,r.jsx)("input",{type:"text",name:"cellPhone",id:"cellPhone",ref:d})]}),(0,r.jsxs)("div",{className:v().control,children:[(0,r.jsx)("label",{htmlFor:"iceName",children:"ICE Name:"}),(0,r.jsx)("input",{type:"text",name:"iceName",id:"iceName",ref:j}),(0,r.jsx)("label",{htmlFor:"iceNumber",children:"ICE Phone Number:"}),(0,r.jsx)("input",{type:"text",name:"iceNumber",id:"iceNumber",ref:b}),(0,r.jsx)("label",{htmlFor:"role",children:"Role:"}),(0,r.jsxs)("select",{name:"role",id:"role",ref:U,children:[(0,r.jsx)("option",{value:"admin",children:"Administrator"}),(0,r.jsx)("option",{value:"member",children:"Member"})]})]}),(0,r.jsx)("button",{type:"submit",className:v().button,children:"Update!"})]})]})]})},g=n(5044),U=n.n(g);var F=function(){var e=(0,i.useState)([]),t=e[0],n=e[1],a=(0,i.useState)([]),o=a[0],s=a[1],u=(0,i.useState)([]),l=u[0],c=u[1];(0,i.useEffect)((function(){fetch("/api/document/years").then((function(e){return e.json()})).then((function(e){return n(e.yearsArray)})),fetch("/api/document/").then((function(e){return e.json()})).then((function(e){return s(e.docsArray)}))}),[]);var d=function(e,t,n,r){for(var a=[],o=[],s=[],i=0;i<e.length;i++)e[i][0]===t&&a.push([e[i][0],e[i][1],e[i][2],e[i][3],e[i][4]]);for(var u=0;u<a.length;u++)a[u][2]===n&&o.push([a[u][0],a[u][1],a[u][2],a[u][3],a[u][4]]);for(var l=0;l<o.length;l++)o[l][1]===r&&s.push([o[l][0],o[l][1],o[l][2],o[l][3],o[l][4]]);return s},m=function(e,t){for(var n=[],r=0;r<e.length;r++)e[r][0]===t&&n.push([e[r][0],e[r][1],e[r][2],e[r][3],e[r][4]]);return n},h=(0,i.useRef)(),p=(0,i.useRef)(),f=(0,i.useRef)();if(l)for(var x=[],j=0;j<l.length;j++)x.push(l[j][3],l[j][4]);else;return(0,r.jsxs)("section",{className:U().background,children:[(0,r.jsx)("h1",{children:"Documents"}),(0,r.jsx)("button",{onClick:function(e){e.preventDefault(),fetch("/api/document/years").then((function(e){return e.json()})).then((function(e){return n(e.yearsArray)})),fetch("/api/document/").then((function(e){return e.json()})).then((function(e){return s(e.docsArray)}))},className:U().button,children:"Refresh"}),(0,r.jsxs)("form",{id:"getDocs",onSubmit:function(e){e.preventDefault();var t=h.current.value,n=p.current.value,r=f.current.value;switch(console.log(o),console.log(t),console.log(n),console.log(r),t){case"meetingMinutes":var a=d(o,t,n,r);console.log(a),c(a);break;case"cebMinutes":var s=d(o,t,n,r);c(s);break;default:var i=m(o,t);c(i)}},children:[(0,r.jsx)("div",{className:U().control,children:(0,r.jsxs)("select",{id:"category",ref:h,children:[(0,r.jsx)("option",{value:"meetingMinutes",children:"Meeting Minutes"}),(0,r.jsx)("option",{value:"cebMinutes",children:"CEB Minutes"}),(0,r.jsx)("option",{value:"roadCaptain",children:"Road Captain"})]})}),(0,r.jsx)("div",{className:U().control,children:(0,r.jsx)("select",{id:"yearlist",ref:p,children:t.map((function(e){return(0,r.jsx)("option",{value:e,children:e})}))})}),(0,r.jsx)("div",{className:U().control,children:(0,r.jsxs)("select",{id:"months",ref:f,children:[(0,r.jsx)("option",{value:"jan",children:"January"}),(0,r.jsx)("option",{value:"feb",children:"Febuary"}),(0,r.jsx)("option",{value:"Mar",children:"March"}),(0,r.jsx)("option",{value:"apr",children:"April"}),(0,r.jsx)("option",{value:"may",children:"May"}),(0,r.jsx)("option",{value:"jun",children:"June"}),(0,r.jsx)("option",{value:"jul",children:"July"}),(0,r.jsx)("option",{value:"aug",children:"August"}),(0,r.jsx)("option",{value:"sep",children:"September"}),(0,r.jsx)("option",{value:"oct",children:"October"}),(0,r.jsx)("option",{value:"nov",children:"November"}),(0,r.jsx)("option",{value:"dec",children:"December"})]})}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{className:U().button,children:"Submit"})})]}),(0,r.jsx)("div",{children:l?l.map((function(e){return(0,r.jsx)("a",{href:e[4],children:e[3]})})):""})]})},R=n(9125),P=n.n(R);var w=!0,S=function(e){var t=JSON.parse(e.members).find((function(t){return t.memberId===e.session.user.name}));return(0,r.jsxs)("section",{children:[(0,r.jsx)("div",{children:(0,r.jsx)("h1",{children:"Members Area"})}),(0,r.jsx)("div",{className:P().adminouterbox,children:(0,r.jsx)("div",{className:P().memberUpdate,children:(0,r.jsx)(j,{user:t})})}),(0,r.jsxs)("div",{className:P().adminouterbox,children:[(0,r.jsx)(m,{}),(0,r.jsx)(F,{}),(0,r.jsx)(y,{})]})]})}},5044:function(e){e.exports={background:"documents_background__5LZ7Y",control:"documents_control__GK6xy",actions:"documents_actions__DRQUI",button:"documents_button__I6VOY",toggle:"documents_toggle__iej3Y",error:"documents_error__oSEnt"}},5465:function(e){e.exports={background:"memberNew_background__W9pF1",control:"memberNew_control__z5XFL",actions:"memberNew_actions__H8iMT",button:"memberNew_button__MSmdh",toggle:"memberNew_toggle__unAbV",error:"memberNew_error__gHqH0"}},713:function(e){e.exports={background:"memberUpdate_background__iRCDq",control:"memberUpdate_control__MQ_8J",actions:"memberUpdate_actions__h8snj",button:"memberUpdate_button___kPM5",toggle:"memberUpdate_toggle__3xUaV",error:"memberUpdate_error___eoPo",state:"memberUpdate_state__S6h74"}},8699:function(e){e.exports={background:"upload_background__a6nJx",control:"upload_control__nM95v",actions:"upload_actions__TvgMD",button:"upload_button__FuH2J",toggle:"upload_toggle___p3lt",error:"upload_error__ZLl2O"}},9125:function(e){e.exports={adminouterbox:"member_adminouterbox__A17pV",memberNew:"member_memberNew__TwM3_",memberUpdate:"member_memberUpdate__mwcTV"}},4287:function(){},9862:function(){},964:function(){}},function(e){e.O(0,[179,134,774,888,377],(function(){return t=3083,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{4917:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return n(9651)}])},9651:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return v}});var t=n(5893),s=n(4051),i=n.n(s),a=n(7294),u=n(8682),o=n.n(u),c=n(1664),l=n(1163),d=n(8633);function p(e,r,n,t,s,i,a){try{var u=e[i](a),o=u.value}catch(c){return void n(c)}u.done?r(o):Promise.resolve(o).then(t,s)}function f(e){return function(){var r=this,n=arguments;return new Promise((function(t,s){var i=e.apply(r,n);function a(e){p(i,t,s,a,u,"next",e)}function u(e){p(i,t,s,a,u,"throw",e)}a(void 0)}))}}function m(e,r,n,t){return h.apply(this,arguments)}function h(){return(h=f(i().mark((function e(r,n,t,s){var a,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/login/registerUser",{method:"POST",body:JSON.stringify({memNumber:r,email:n,passwd:t,passwdVerify:s}),headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:if(u=e.sent,a.ok){e.next=8;break}return e.abrupt("return",u.message);case 8:return e.abrupt("return","OK");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=function(){var e=(0,a.useState)(!0),r=e[0],n=e[1],s=(0,a.useState)(""),u=s[0],p=s[1],h=(0,a.useRef)(),x=(0,a.useRef)(" "),v=(0,a.useRef)(),b=(0,a.useRef)(" "),g=(0,l.useRouter)();function w(){return(w=f(i().mark((function e(n){var t,s,a,u,o,c,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),t=h.current.value,s=v.current.value,a=t.toUpperCase(),!r){e.next=12;break}return a.includes("FM")||a.includes("AUX")||a.includes("S")||a.includes("SAUX")||p("Member number must include FM, AUX, S, SAUX"),e.next=8,(0,d.zB)("credentials",{redirect:!1,memberNumber:a,password:s});case 8:(u=e.sent).error?p(u.error):g.replace("/members"),e.next=23;break;case 12:return o=x.current.value,c=b.current.value,a.includes("FM")||a.includes("AUX")||a.includes("S")||a.includes("SAUX")||p("Member number must include FM, AUX, S, SAUX"),o.includes("@")||p("Must be a valid email"),s!==c&&p("Passwords do not Match"),!s.length>=8&&p("Password must be at leaset 8 charater long"),e.next=20,m(a,o,s,c);case 20:l=e.sent,console.log(l),p(l);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=(0,t.jsxs)("div",{className:o().control,children:[(0,t.jsx)("label",{htmlFor:"email",children:"Your Email"}),(0,t.jsx)("input",{type:"email",id:"email",required:!0,ref:x})]}),j=(0,t.jsxs)("div",{className:o().control,children:[(0,t.jsx)("label",{htmlFor:"passwordVerify",children:"Your Password"}),(0,t.jsx)("input",{type:"password",id:"passwordVerify",required:!0,ref:b})]}),N=(0,t.jsx)(c.default,{href:"/login/passwd-reset",children:(0,t.jsx)("a",{className:o().toggle,children:"Password Reset"})});return(0,t.jsxs)("section",{className:o().auth,children:[(0,t.jsx)("h1",{children:r?"Login":"Register"}),(0,t.jsx)("p",{className:o().error,children:u}),(0,t.jsxs)("form",{onSubmit:function(e){return w.apply(this,arguments)},children:[(0,t.jsxs)("div",{className:o().control,children:[(0,t.jsx)("label",{htmlFor:"memNumber",children:"Member Number"}),(0,t.jsx)("input",{type:"text",id:"memNumber",required:!0,placeholder:"FM1234, AUX1234, S1234, SAUX1234",ref:h})]}),r?"":_,(0,t.jsxs)("div",{className:o().control,children:[(0,t.jsx)("label",{htmlFor:"password",children:"Your Password"}),(0,t.jsx)("input",{type:"password",id:"password",required:!0,ref:v})]}),r?"":j,(0,t.jsxs)("div",{className:o().actions,children:[(0,t.jsx)("button",{children:r?"Login":"Register Account"}),(0,t.jsx)("button",{type:"button",className:o().toggle,onClick:function(e){e.preventDefault(),n(!r)},children:r?"Register new account":"Login with existing account"}),r?N:""]})]})]})};var v=function(){return(0,t.jsx)("div",{children:(0,t.jsx)(x,{})})}},8682:function(e){e.exports={auth:"login_auth__U4aLK",control:"login_control__WzI3x",actions:"login_actions__eSNq2",toggle:"login_toggle__Eiffl",error:"login_error__KNAtk"}}},function(e){e.O(0,[774,888,179],(function(){return r=4917,e(e.s=r);var r}));var r=e.O();_N_E=r}]);
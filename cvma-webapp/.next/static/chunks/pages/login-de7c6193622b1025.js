(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{4917:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return n(9651)}])},9651:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return h}});var t=n(5893),s=n(4051),i=n.n(s),a=n(7294),o=n(8682),u=n.n(o),c=n(1664),l=n(1163),d=n(8633);function p(e,r,n,t,s,i,a){try{var o=e[i](a),u=o.value}catch(c){return void n(c)}o.done?r(u):Promise.resolve(u).then(t,s)}function f(e){return function(){var r=this,n=arguments;return new Promise((function(t,s){var i=e.apply(r,n);function a(e){p(i,t,s,a,o,"next",e)}function o(e){p(i,t,s,a,o,"throw",e)}a(void 0)}))}}var m=function(){var e=(0,a.useState)(!0),r=e[0],n=e[1],s=(0,a.useState)(""),o=s[0],p=s[1],m=(0,a.useRef)(),h=(0,a.useRef)(" "),x=(0,a.useRef)(),g=(0,a.useRef)(" "),v=(0,l.useRouter)();function b(e,r,n,t){return w.apply(this,arguments)}function w(){return(w=f(i().mark((function e(r,t,s,a){var o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/login/registerUser",{method:"POST",body:JSON.stringify({memNumber:r,email:t,passwd:s,passwdVerify:a}),headers:{"Content-Type":"application/json"}});case 2:return o=e.sent,e.next=5,o.json();case 5:if(u=e.sent,console.log(u),o.ok){e.next=9;break}return e.abrupt("return",u.message);case 9:return n(!0),e.abrupt("return","Password Set please login");case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=f(i().mark((function e(n){var t,s,a,o,u,c,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),t=m.current.value,s=x.current.value,a=t.toUpperCase(),!r){e.next=12;break}return a.includes("FM")||a.includes("AUX")||a.includes("S")||a.includes("SAUX")||p("Member number must include FM, AUX, S, SAUX"),e.next=8,(0,d.zB)("credentials",{redirect:!1,memberNumber:a,password:s});case 8:(o=e.sent).error?p(o.error):v.replace("/members"),e.next=23;break;case 12:return u=h.current.value,c=g.current.value,a.includes("FM")||a.includes("AUX")||a.includes("S")||a.includes("SAUX")||p("Member number must include FM, AUX, S, SAUX"),u.includes("@")||p("Must be a valid email"),s!==c&&p("Passwords do not Match"),!s.length>=8&&p("Password must be at leaset 8 charater long"),e.next=20,b(a,u,s,c);case 20:l=e.sent,console.log(l),p(l);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=(0,t.jsxs)("div",{className:u().control,children:[(0,t.jsx)("label",{htmlFor:"email",children:"Your Email"}),(0,t.jsx)("input",{type:"email",id:"email",required:!0,ref:h})]}),N=(0,t.jsxs)("div",{className:u().control,children:[(0,t.jsx)("label",{htmlFor:"passwordVerify",children:"Your Password"}),(0,t.jsx)("input",{type:"password",id:"passwordVerify",required:!0,ref:g})]}),y=(0,t.jsx)(c.default,{href:"/login/passwd-reset",children:(0,t.jsx)("a",{className:u().toggle,children:"Password Reset"})});return(0,t.jsxs)("section",{className:u().auth,children:[(0,t.jsx)("h1",{children:r?"Login":"Register"}),(0,t.jsx)("p",{className:u().error,children:o}),(0,t.jsxs)("form",{onSubmit:function(e){return _.apply(this,arguments)},children:[(0,t.jsxs)("div",{className:u().control,children:[(0,t.jsx)("label",{htmlFor:"memNumber",children:"Member Number"}),(0,t.jsx)("input",{type:"text",id:"memNumber",required:!0,placeholder:"FM1234, AUX1234, S1234, SAUX1234",ref:m})]}),r?"":j,(0,t.jsxs)("div",{className:u().control,children:[(0,t.jsx)("label",{htmlFor:"password",children:"Your Password"}),(0,t.jsx)("input",{type:"password",id:"password",required:!0,ref:x})]}),r?"":N,(0,t.jsxs)("div",{className:u().actions,children:[(0,t.jsx)("button",{children:r?"Login":"Register Account"}),(0,t.jsx)("button",{type:"button",className:u().toggle,onClick:function(e){e.preventDefault(),n(!r)},children:r?"Register new account":"Login with existing account"}),r?y:""]})]})]})};var h=function(){return(0,t.jsx)("div",{children:(0,t.jsx)(m,{})})}},8682:function(e){e.exports={auth:"login_auth__U4aLK",control:"login_control__WzI3x",actions:"login_actions__eSNq2",toggle:"login_toggle__Eiffl",error:"login_error__KNAtk"}}},function(e){e.O(0,[774,888,377],(function(){return r=4917,e(e.s=r);var r}));var r=e.O();_N_E=r}]);